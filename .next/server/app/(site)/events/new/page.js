(()=>{var e={};e.id=675,e.ids=[675],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6731:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d}),a(6506),a(7183),a(5866),a(2029);var s=a(3191),r=a(8716),n=a(7922),l=a.n(n),i=a(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(t,o);let d=["",{children:["(site)",{children:["events",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,6506)),"C:\\Users\\Lee\\Desktop\\mySite\\src\\app\\(site)\\events\\new\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,7183)),"C:\\Users\\Lee\\Desktop\\mySite\\src\\app\\(site)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,2029)),"C:\\Users\\Lee\\Desktop\\mySite\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Lee\\Desktop\\mySite\\src\\app\\(site)\\events\\new\\page.tsx"],u="/(site)/events/new/page",m={require:a,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(site)/events/new/page",pathname:"/events/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8670:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},6203:()=>{},8298:(e,t,a)=>{Promise.resolve().then(a.bind(a,5108))},5303:()=>{},5047:(e,t,a)=>{"use strict";var s=a(7389);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},5108:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var s=a(326),r=a(7577),n=a(5047),l=a(7937),i=a(8597),o=a(9811);let d=["청첩장","기념일","돌잔치","가족 모임","기타"];function c(){let e=(0,n.useRouter)(),{update:t}=(0,o.k)(),a=(0,r.useMemo)(()=>new Date().toISOString().slice(0,10),[]),[c,u]=(0,r.useState)(""),[m,h]=(0,r.useState)("청첩장"),[p,x]=(0,r.useState)(a),[v,g]=(0,r.useState)(""),[j,b]=(0,r.useState)(""),[f,N]=(0,r.useState)(""),[y,w]=(0,r.useState)(""),[S,A]=(0,r.useState)(""),[k,C]=(0,r.useState)(""),[P,I]=(0,r.useState)(""),[O,D]=(0,r.useState)(""),[U,_]=(0,r.useState)(""),[E,R]=(0,r.useState)(""),[M,$]=(0,r.useState)(),[q,L]=(0,r.useState)([]),[T,H]=(0,r.useState)(null),[G,J]=(0,r.useState)(null),[B,F]=(0,r.useState)(null),[V,W]=(0,r.useState)(!0),[X,z]=(0,r.useState)(!0),[K,Q]=(0,r.useState)(null),Y=async e=>{$((await (0,l.R)(e.target.files,1,{maxWidth:2e3,maxHeight:2e3,quality:.85,mimeType:"image/webp"}))[0]),e.target.value=""},Z=async e=>{let t=await (0,l.R)(e.target.files,12,{maxWidth:1600,maxHeight:1600,quality:.82,mimeType:"image/webp"});L(e=>[...e,...t]),e.target.value=""},ee=e=>{window.confirm("이 사진을 삭제할까요?")&&L(t=>{let a=t[e];return a&&a===M&&$(void 0),Q({index:e,photo:a}),t.filter((t,a)=>a!==e)})},et=(e,t)=>{L(a=>{let s="up"===t?e-1:e+1;return s<0||s>=a.length?a:(0,l.u)(a,e,s)})},ea=e=>{$(e),F("대표 사진을 변경했어요."),window.setTimeout(()=>F(null),1500)},es=e=>{H(e)},er=e=>{L(t=>null===T||T===e?t:(0,l.u)(t,T,e)),H(null),J(null)},en=e=>{J(e)};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("header",{children:[s.jsx("h2",{className:"text-2xl font-semibold",children:"새 이벤트 만들기"}),s.jsx("p",{className:"mt-2 text-sm text-sand-600",children:"청첩장, 기념일 등 특별한 날을 기록하세요."})]}),(0,s.jsxs)("section",{className:"card space-y-6 p-6 text-sm text-sand-700",children:[(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"label",children:"이벤트 이름"}),s.jsx("input",{className:"input mt-2",placeholder:"예: 청첩장, 기념일 디너",value:c,onChange:e=>u(e.target.value)})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"label",children:"이벤트 유형"}),s.jsx("select",{className:"input mt-2",value:m,onChange:e=>h(e.target.value),children:d.map(e=>s.jsx("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"label",children:"날짜"}),s.jsx("input",{className:"input mt-2",type:"date",value:p,onChange:e=>x(e.target.value)})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"label",children:"시간"}),s.jsx("input",{className:"input mt-2",type:"time",value:v,onChange:e=>g(e.target.value)})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"label",children:"장소"}),s.jsx("input",{className:"input mt-2",placeholder:"예: 서울, 강남웨딩홀",value:j,onChange:e=>b(e.target.value)})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"label",children:"연락처"}),s.jsx("input",{className:"input mt-2",placeholder:"연락 가능한 번호",value:f,onChange:e=>N(e.target.value)})]})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"label",children:"소개글"}),s.jsx("textarea",{className:"textarea mt-2 min-h-[140px]",placeholder:"행사에 대한 소개와 인사말을 적어주세요.",value:y,onChange:e=>w(e.target.value)})]}),"청첩장"===m?(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"label",children:"인삿말"}),s.jsx("textarea",{className:"textarea mt-2 min-h-[120px]",placeholder:"예: 소중한 분들을 초대합니다.",value:S,onChange:e=>A(e.target.value)})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"label",children:"예식장 안내"}),s.jsx("textarea",{className:"textarea mt-2 min-h-[120px]",placeholder:"예: 서울 웨딩홀 3층 라벤더홀",value:k,onChange:e=>C(e.target.value)})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"label",children:"교통 안내"}),s.jsx("textarea",{className:"textarea mt-2 min-h-[120px]",placeholder:"예: 강남역 5번 출구 도보 8분",value:P,onChange:e=>I(e.target.value)})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"label",children:"마음 전할 곳"}),s.jsx("textarea",{className:"textarea mt-2 min-h-[120px]",placeholder:"예: 신랑 김OO 123-456-789 (OO은행)",value:O,onChange:e=>D(e.target.value)})]})]}):null,(0,s.jsxs)("div",{children:[s.jsx("p",{className:"label",children:"대표 이미지 URL"}),s.jsx("input",{className:"input mt-2",placeholder:"이미지 주소를 입력하세요",value:U,onChange:e=>_(e.target.value)})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"label",children:"대표 이미지 업로드"}),(0,s.jsxs)("div",{className:"mt-2 flex items-center gap-3 rounded-2xl border border-dashed border-sand-200 bg-sand-50 px-4 py-6",children:[s.jsx("span",{className:"text-sm text-sand-500",children:"행사의 대표 사진을 올려주세요."}),(0,s.jsxs)("label",{className:"button-outline ml-auto cursor-pointer",children:["파일 선택",s.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Y})]})]}),M?s.jsx("img",{src:M,alt:"대표 이미지 미리보기",className:"mt-3 h-32 w-full rounded-xl object-cover"}):null]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"label",children:"추가 사진 URL"}),s.jsx("input",{className:"input mt-2",placeholder:"쉼표로 여러 장 입력",value:E,onChange:e=>R(e.target.value)})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"label",children:"추가 사진 업로드"}),(0,s.jsxs)("div",{className:"mt-2 flex items-center gap-3 rounded-2xl border border-dashed border-sand-200 bg-sand-50 px-4 py-6",children:[s.jsx("span",{className:"text-sm text-sand-500",children:"최대 12장까지 추가할 수 있어요."}),(0,s.jsxs)("label",{className:"button-outline ml-auto cursor-pointer",children:["파일 선택",s.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:Z})]})]}),q.length>0?s.jsx("div",{className:"mt-4 grid gap-3 sm:grid-cols-3",children:q.map((e,t)=>(0,s.jsxs)("div",{className:`photo-tile ${T===t?"dragging":""} ${G===t?"drop-target":""}`,onDragOver:e=>{e.preventDefault(),en(t)},onDrop:()=>er(t),children:[s.jsx("img",{src:e,alt:"업로드한 사진",className:`h-24 w-full rounded-xl object-cover ${M===e?"ring-2 ring-sand-400":""}`,draggable:!0,onDragStart:()=>es(t)}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-sand-500",children:[s.jsx("span",{children:M===e?"대표":`#${t+1}`}),(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",className:"hover:text-sand-900",onClick:()=>ea(e),children:"대표 지정"}),s.jsx("button",{type:"button",className:"hover:text-sand-900",onClick:()=>et(t,"up"),children:"위로"}),s.jsx("button",{type:"button",className:"hover:text-sand-900",onClick:()=>et(t,"down"),children:"아래로"}),s.jsx("button",{type:"button",className:"text-rose-400 hover:text-rose-600",onClick:()=>ee(t),children:"삭제"})]})]})]},e))}):null,K?(0,s.jsxs)("div",{className:"mt-3 flex items-center gap-3 text-xs text-sand-500",children:[s.jsx("span",{children:"사진을 삭제했어요."}),s.jsx("button",{className:"button-outline px-2 py-1 text-xs",type:"button",onClick:()=>{K&&(L(e=>(0,l.u)([...e,K.photo],e.length,K.index)),Q(null),F("삭제를 되돌렸어요."),window.setTimeout(()=>F(null),1500))},children:"되돌리기"})]}):null]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[s.jsx("input",{type:"checkbox",className:"accent-sand-700",checked:V,onChange:e=>W(e.target.checked)}),"공개 이벤트로 저장하기"]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[s.jsx("input",{type:"checkbox",className:"accent-sand-700",checked:X,onChange:e=>z(e.target.checked)}),"공유 링크 만들기"]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{className:"button-outline",type:"button",children:"임시저장"}),s.jsx("button",{className:"button",type:"button",onClick:()=>{if(!c.trim())return;let a=(0,i.Mc)("event"),s=X?(0,i.Mc)("share"):void 0,r=[...q,...E.split(",").map(e=>e.trim()).filter(Boolean)];t(e=>({...e,events:[{id:a,title:c.trim(),type:m,date:p,time:v.trim()||void 0,location:j.trim()||void 0,contact:f.trim()||void 0,description:y.trim(),greeting:S.trim()||void 0,venueInfo:k.trim()||void 0,transitInfo:P.trim()||void 0,accountInfo:O.trim()||void 0,coverUrl:M||U.trim()||void 0,photos:r,guestbook:[],isPublic:V,shareId:s,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},...e.events]})),e.push(`/events/${a}`)},children:"이벤트 만들기"})]})]}),B?s.jsx("div",{className:"fixed bottom-6 left-1/2 z-50 -translate-x-1/2 rounded-full bg-sand-900 px-4 py-2 text-xs text-white",children:B}):null]})}},7937:(e,t,a)=>{"use strict";a.d(t,{R:()=>l,u:()=>i});let s=e=>new Promise((t,a)=>{let s=new FileReader;s.onload=()=>t(String(s.result)),s.onerror=()=>a(Error("파일을 읽지 못했어요.")),s.readAsDataURL(e)}),r=e=>new Promise((t,a)=>{let s=new Image;s.onload=()=>t(s),s.onerror=()=>a(Error("이미지를 불러오지 못했어요.")),s.src=e}),n=async(e,t={})=>{let{maxWidth:a=1600,maxHeight:n=1600,quality:l=.82,mimeType:i="image/webp"}=t,o=await s(e),d=await r(o),c=Math.min(a/d.width,n/d.height,1),u=Math.round(d.width*c),m=Math.round(d.height*c),h=document.createElement("canvas");h.width=u,h.height=m;let p=h.getContext("2d");return p?(p.drawImage(d,0,0,u,m),h.toDataURL(i,l)):o},l=async(e,t=12,a={})=>{if(!e)return[];let s=Array.from(e).slice(0,t);return await Promise.all(s.map(e=>n(e,a)))},i=(e,t,a)=>{if(t===a)return e;let s=[...e],[r]=s.splice(t,1);return void 0===r?e:(s.splice(a,0,r),s)}},8597:(e,t,a)=>{"use strict";a.d(t,{BX:()=>k,FB:()=>m,Gf:()=>A,H4:()=>C,Mc:()=>d,OH:()=>u,dk:()=>y,jo:()=>S,mu:()=>c,p6:()=>o,u1:()=>N});let s="lifeArchiveData",r=()=>new Date().toISOString(),n={defaultVisibility:"private",theme:"cream"},l={journals:[{id:"journal-1",title:"따뜻했던 오후",date:"2026-01-15",category:"데이트",tags:["산책","카페"],location:"서교동",summary:"작은 산책과 커피 한 잔을 기록했어요.",content:"오후의 공기는 맑고 따뜻했어요. 천천히 걸으며 이야기를 나누고, 작은 카페에 들어가 창가에 앉았어요.",photos:[],isPublic:!1,shareId:"share-journal-1",createdAt:r(),updatedAt:r()}],albums:[{id:"album-1",title:"봄 여행",periodStart:"2025-04-02",periodEnd:"2025-04-05",tags:["여행","봄"],coverUrl:"",photos:[],memo:"가족과 함께한 봄 여행 사진을 모아두었어요.",isPublic:!1,shareId:"share-album-1",createdAt:r(),updatedAt:r()}],events:[{id:"event-1",title:"청첩장",type:"청첩장",date:"2026-03-21",time:"14:00",location:"서울 웨딩홀 3층",contact:"010-0000-0000",greeting:"소중한 분들을 초대합니다. 함께 축하해 주시면 감사하겠습니다.",venueInfo:"서울 웨딩홀 3층 라벤더홀",transitInfo:"지하철 2호선 강남역 5번 출구 도보 8분",accountInfo:"신랑 김OO 123-456-789 (OO은행)",description:"소중한 분들을 초대합니다. 편안한 마음으로 오셔서 함께 축하해 주세요.",coverUrl:"",photos:[],guestbook:[{id:"guestbook-1",name:"지인",message:"결혼 진심으로 축하해요!",createdAt:r()}],isPublic:!0,shareId:"share-event-1",createdAt:r(),updatedAt:r()}],settings:n,updatedAt:r()},i=()=>!1,o=e=>e?e.replaceAll("-","."):"",d=e=>"undefined"!=typeof crypto&&"randomUUID"in crypto?`${e}-${crypto.randomUUID()}`:`${e}-${Date.now()}-${Math.random().toString(16).slice(2)}`,c=()=>{if(!i())return l;let e=window.localStorage.getItem(s);if(!e)return l;try{let t=JSON.parse(e);return{...l,...t,journals:t.journals??l.journals,albums:t.albums??l.albums,events:t.events??l.events,settings:t.settings??l.settings}}catch{return l}},u=e=>{i()&&window.localStorage.setItem(s,JSON.stringify(e))},m=()=>i()?window.localStorage.getItem(s)?c():(u(l),l):l,h=(e,t)=>"string"==typeof e?e:t,p=(e,t="")=>h(e,t)??t,x=e=>Array.isArray(e)?e.filter(e=>"string"==typeof e):[],v=(e,t=!1)=>"boolean"==typeof e?e:t,g=e=>({id:p(e.id,d("journal")),title:p(e.title,""),date:p(e.date,""),category:e.category??"기타",tags:x(e.tags),location:h(e.location,void 0),summary:h(e.summary,void 0),content:p(e.content,""),photos:x(e.photos),isPublic:v(e.isPublic),shareId:h(e.shareId,void 0),createdAt:p(e.createdAt,r()),updatedAt:p(e.updatedAt,r())}),j=e=>({id:p(e.id,d("album")),title:p(e.title,""),periodStart:h(e.periodStart,void 0),periodEnd:h(e.periodEnd,void 0),tags:x(e.tags),coverUrl:h(e.coverUrl,void 0),photos:x(e.photos),memo:h(e.memo,void 0),isPublic:v(e.isPublic),shareId:h(e.shareId,void 0),createdAt:p(e.createdAt,r()),updatedAt:p(e.updatedAt,r())}),b=e=>({id:p(e.id,d("event")),title:p(e.title,""),type:e.type??"기타",date:p(e.date,""),time:h(e.time,void 0),location:h(e.location,void 0),contact:h(e.contact,void 0),greeting:h(e.greeting,void 0),venueInfo:h(e.venueInfo,void 0),transitInfo:h(e.transitInfo,void 0),accountInfo:h(e.accountInfo,void 0),description:p(e.description,""),coverUrl:h(e.coverUrl,void 0),photos:x(e.photos),guestbook:Array.isArray(e.guestbook)?e.guestbook.filter(e=>e&&"object"==typeof e).map(e=>({id:h(e.id)??d("guestbook"),name:h(e.name)??"익명",message:h(e.message)??"",createdAt:p(e.createdAt,r())})):[],isPublic:v(e.isPublic),shareId:h(e.shareId,void 0),createdAt:p(e.createdAt,r()),updatedAt:p(e.updatedAt,r())}),f=e=>({defaultVisibility:e?.defaultVisibility==="link"?"link":n.defaultVisibility,theme:e?.theme==="navy"||e?.theme==="olive"?e.theme:n.theme}),N=e=>JSON.stringify({...e,updatedAt:r()},null,2),y=e=>{let t=JSON.parse(e);return{journals:(t.journals??[]).map(e=>g(e)),albums:(t.albums??[]).map(e=>j(e)),events:(t.events??[]).map(e=>b(e)),settings:f(t.settings),updatedAt:r()}},w=e=>[...e].sort((e,t)=>(t.date??"").localeCompare(e.date??"")),S=e=>w(e)[0],A=(e,t=3)=>w(e).slice(0,t),k=(e,t=2)=>w(e).slice(0,t),C=(e,t=2)=>[...e].slice(0,t)},9811:(e,t,a)=>{"use strict";a.d(t,{k:()=>n});var s=a(7577),r=a(8597);let n=()=>{let[e,t]=(0,s.useState)(r.FB),[a,n]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{t((0,r.mu)()),(async()=>{try{let e=await fetch("/api/archive",{cache:"no-store"});if(!e.ok)throw Error("failed");let a=await e.json();t(a),(0,r.OH)(a)}catch{}finally{n(!0)}})()},[]),{data:e,update:(0,s.useCallback)(e=>{t(t=>{let a={...e(t),updatedAt:new Date().toISOString()};return(0,r.OH)(a),fetch("/api/archive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).catch(()=>{}),a})},[]),refresh:(0,s.useCallback)(()=>{t((0,r.mu)())},[]),ready:a}}},6506:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(9510);let r=(0,a(8570).createProxy)(String.raw`C:\Users\Lee\Desktop\mySite\src\components\events\EventFormClient.tsx#default`);function n(){return s.jsx(r,{})}},7183:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n,metadata:()=>r});var s=a(9510);a(5023);let r={title:"나만의 라이프 아카이브",description:"기록과 사진을 모아두는 개인 아카이브 공간"};function n({children:e}){return(0,s.jsxs)("div",{className:"mx-auto flex min-h-screen max-w-6xl flex-col px-6 py-8",children:[(0,s.jsxs)("header",{className:"mb-10 flex flex-wrap items-center justify-between gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-sand-600",children:"my life archive"}),s.jsx("h1",{className:"text-2xl font-semibold",children:"나만의 사이트"})]}),(0,s.jsxs)("nav",{className:"flex flex-wrap gap-4 text-sm text-sand-700",children:[s.jsx("a",{className:"hover:text-sand-900",href:"/",children:"집"}),s.jsx("a",{className:"hover:text-sand-900",href:"/journal",children:"일기장"}),s.jsx("a",{className:"hover:text-sand-900",href:"/albums",children:"사진첩"}),s.jsx("a",{className:"hover:text-sand-900",href:"/events",children:"특별한 날들"}),s.jsx("a",{className:"hover:text-sand-900",href:"/search",children:"찾기"}),s.jsx("a",{className:"hover:text-sand-900",href:"/settings",children:"내 공간"})]})]}),s.jsx("main",{className:"flex-1",children:e}),s.jsx("footer",{className:"mt-12 border-t border-sand-100 pt-6 text-xs text-sand-500",children:"나의 기록을 차분하게 모아두는 개인 공간"})]})}},2029:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var s=a(9510);function r({children:e}){return s.jsx("html",{lang:"ko",children:s.jsx("body",{className:"min-h-screen",children:e})})}a(5023)},5023:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[948,471],()=>a(6731));module.exports=s})();