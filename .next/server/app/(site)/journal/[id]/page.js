(()=>{var e={};e.id=687,e.ids=[687],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7535:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d}),s(7042),s(7183),s(5866),s(2029);var a=s(3191),r=s(8716),n=s(7922),i=s.n(n),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["(site)",{children:["journal",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7042)),"C:\\Users\\Lee\\Desktop\\mySite\\src\\app\\(site)\\journal\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,7183)),"C:\\Users\\Lee\\Desktop\\mySite\\src\\app\\(site)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"C:\\Users\\Lee\\Desktop\\mySite\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Lee\\Desktop\\mySite\\src\\app\\(site)\\journal\\[id]\\page.tsx"],u="/(site)/journal/[id]/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(site)/journal/[id]/page",pathname:"/journal/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8670:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},6203:()=>{},2624:(e,t,s)=>{Promise.resolve().then(s.bind(s,9882))},5303:()=>{},5047:(e,t,s)=>{"use strict";var a=s(7389);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},9882:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var a=s(326),r=s(7577),n=s(5047),i=s(7937),l=s(8597),o=s(9811);function d({id:e}){let t=(0,n.useRouter)(),{data:s,ready:d,update:c}=(0,o.k)(),u=s.journals.find(t=>t.id===e),[m,h]=(0,r.useState)(!1),[p,x]=(0,r.useState)(""),[g,v]=(0,r.useState)(""),[j,f]=(0,r.useState)("데이트"),[b,y]=(0,r.useState)(""),[N,w]=(0,r.useState)(""),[A,S]=(0,r.useState)(""),[P,k]=(0,r.useState)([]),[I,C]=(0,r.useState)(null),[D,O]=(0,r.useState)(null),U=async e=>{let t=await (0,i.R)(e.target.files,6,{maxWidth:1600,maxHeight:1600,quality:.82,mimeType:"image/webp"});k(e=>[...e,...t]),e.target.value=""},_=e=>{window.confirm("이 사진을 삭제할까요?")&&k(t=>t.filter((t,s)=>s!==e))},E=(e,t)=>{k(s=>{let a="up"===t?e-1:e+1;return a<0||a>=s.length?s:(0,i.u)(s,e,a)})},$=e=>{k(t=>(0,i.u)(t,e,0))},R=e=>{C(e)},q=e=>{k(t=>null===I||I===e?t:(0,i.u)(t,I,e)),C(null),O(null)},M=e=>{O(e)};return d?u?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-2xl font-semibold",children:u.title}),(0,a.jsxs)("p",{className:"mt-2 text-sm text-sand-600",children:[(0,l.p6)(u.date)," \xb7 ",u.category]})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:m?(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{className:"button-outline",type:"button",onClick:()=>{h(!1)},children:"취소"}),a.jsx("button",{className:"button",type:"button",onClick:()=>{if(!u)return;let e=A.trim(),t=e.length>0?`${e.slice(0,60)}...`:"";c(s=>({...s,journals:s.journals.map(s=>s.id===u.id?{...s,title:p.trim(),date:g,category:j,tags:b.split(",").map(e=>e.trim()).filter(Boolean),location:N.trim()||void 0,summary:t,content:e,photos:P,updatedAt:new Date().toISOString()}:s)})),h(!1)},children:"저장"})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{className:"button-outline",type:"button",onClick:()=>{u&&(x(u.title),v(u.date),f(u.category),y(u.tags.join(", ")),w(u.location??""),S(u.content),k(u.photos??[]),h(!0))},children:"수정"}),a.jsx("button",{className:"button-outline",type:"button",onClick:()=>{u&&window.confirm("이 기록을 삭제할까요?")&&(c(e=>({...e,journals:e.journals.filter(e=>e.id!==u.id)})),t.push("/journal"))},children:"삭제"})]})})]}),m?(0,a.jsxs)("section",{className:"card space-y-6 p-6 text-sm text-sand-700",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"label",children:"제목"}),a.jsx("input",{className:"input mt-2",value:p,onChange:e=>x(e.target.value)})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"label",children:"날짜"}),a.jsx("input",{className:"input mt-2",type:"date",value:g,onChange:e=>v(e.target.value)})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"label",children:"카테고리"}),a.jsx("select",{className:"input mt-2",value:j,onChange:e=>f(e.target.value),children:["데이트","연애","육아","가족","여행","기타"].map(e=>a.jsx("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"label",children:"장소"}),a.jsx("input",{className:"input mt-2",value:N,onChange:e=>w(e.target.value)})]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"label",children:"태그"}),a.jsx("input",{className:"input mt-2",value:b,onChange:e=>y(e.target.value)})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"label",children:"사진 관리"}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-3 rounded-2xl border border-dashed border-sand-200 bg-sand-50 px-4 py-6",children:[a.jsx("span",{className:"text-sm text-sand-500",children:"사진을 추가하거나 순서를 바꿔보세요."}),(0,a.jsxs)("label",{className:"button-outline ml-auto cursor-pointer",children:["사진 추가",a.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:U})]})]}),P.length>0?a.jsx("div",{className:"mt-4 grid gap-3 sm:grid-cols-3",children:P.map((e,t)=>(0,a.jsxs)("div",{className:`photo-tile ${I===t?"dragging":""} ${D===t?"drop-target":""}`,onDragOver:e=>{e.preventDefault(),M(t)},onDrop:()=>q(t),children:[a.jsx("img",{src:e,alt:"업로드한 사진",className:`h-24 w-full rounded-xl object-cover ${0===t?"ring-2 ring-sand-400":""}`,draggable:!0,onDragStart:()=>R(t)}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-sand-500",children:[a.jsx("span",{children:0===t?"대표":`#${t+1}`}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",className:"hover:text-sand-900",onClick:()=>$(t),children:"대표 지정"}),a.jsx("button",{type:"button",className:"hover:text-sand-900",onClick:()=>E(t,"up"),children:"위로"}),a.jsx("button",{type:"button",className:"hover:text-sand-900",onClick:()=>E(t,"down"),children:"아래로"}),a.jsx("button",{type:"button",className:"text-rose-400 hover:text-rose-600",onClick:()=>_(t),children:"삭제"})]})]})]},e))}):null]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"label",children:"본문"}),a.jsx("textarea",{className:"textarea mt-2 min-h-[180px]",value:A,onChange:e=>S(e.target.value)})]})]}):(0,a.jsxs)("section",{className:"card space-y-6 p-6 text-sm text-sand-700",children:[a.jsx("div",{className:"flex flex-wrap gap-2",children:0===u.tags.length?a.jsx("span",{className:"badge",children:"태그 없음"}):u.tags.map(e=>a.jsx("span",{className:"badge",children:e},e))}),u.location?(0,a.jsxs)("p",{className:"text-sm text-sand-600",children:["장소 \xb7 ",u.location]}):null,a.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:(u.photos.length?u.photos:Array.from({length:3})).map((e,t)=>"string"==typeof e&&e?a.jsx("img",{src:e,alt:`${u.title} 사진`,className:"h-32 w-full rounded-2xl object-cover"},e):a.jsx("div",{className:"h-32 rounded-2xl bg-sand-100"},t))}),a.jsx("article",{className:"space-y-4 leading-relaxed",children:a.jsx("p",{children:u.content||"아직 본문이 작성되지 않았어요."})}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[u.shareId?a.jsx("a",{className:"button-outline",href:`/share/${u.shareId}`,children:"공유 페이지 보기"}):null,a.jsx("a",{className:"button-outline",href:"/journal/new",children:"새 기록 작성"})]})]})]}):a.jsx("div",{className:"card p-6 text-sm text-sand-600",children:"해당 기록을 찾을 수 없어요."}):a.jsx("div",{className:"text-sm text-sand-600",children:"데이터를 불러오는 중..."})}},7937:(e,t,s)=>{"use strict";s.d(t,{R:()=>i,u:()=>l});let a=e=>new Promise((t,s)=>{let a=new FileReader;a.onload=()=>t(String(a.result)),a.onerror=()=>s(Error("파일을 읽지 못했어요.")),a.readAsDataURL(e)}),r=e=>new Promise((t,s)=>{let a=new Image;a.onload=()=>t(a),a.onerror=()=>s(Error("이미지를 불러오지 못했어요.")),a.src=e}),n=async(e,t={})=>{let{maxWidth:s=1600,maxHeight:n=1600,quality:i=.82,mimeType:l="image/webp"}=t,o=await a(e),d=await r(o),c=Math.min(s/d.width,n/d.height,1),u=Math.round(d.width*c),m=Math.round(d.height*c),h=document.createElement("canvas");h.width=u,h.height=m;let p=h.getContext("2d");return p?(p.drawImage(d,0,0,u,m),h.toDataURL(l,i)):o},i=async(e,t=12,s={})=>{if(!e)return[];let a=Array.from(e).slice(0,t);return await Promise.all(a.map(e=>n(e,s)))},l=(e,t,s)=>{if(t===s)return e;let a=[...e],[r]=a.splice(t,1);return void 0===r?e:(a.splice(s,0,r),a)}},8597:(e,t,s)=>{"use strict";s.d(t,{BX:()=>P,FB:()=>m,Gf:()=>S,H4:()=>k,Mc:()=>d,OH:()=>u,dk:()=>N,jo:()=>A,mu:()=>c,p6:()=>o,u1:()=>y});let a="lifeArchiveData",r=()=>new Date().toISOString(),n={defaultVisibility:"private",theme:"cream"},i={journals:[{id:"journal-1",title:"따뜻했던 오후",date:"2026-01-15",category:"데이트",tags:["산책","카페"],location:"서교동",summary:"작은 산책과 커피 한 잔을 기록했어요.",content:"오후의 공기는 맑고 따뜻했어요. 천천히 걸으며 이야기를 나누고, 작은 카페에 들어가 창가에 앉았어요.",photos:[],isPublic:!1,shareId:"share-journal-1",createdAt:r(),updatedAt:r()}],albums:[{id:"album-1",title:"봄 여행",periodStart:"2025-04-02",periodEnd:"2025-04-05",tags:["여행","봄"],coverUrl:"",photos:[],memo:"가족과 함께한 봄 여행 사진을 모아두었어요.",isPublic:!1,shareId:"share-album-1",createdAt:r(),updatedAt:r()}],events:[{id:"event-1",title:"청첩장",type:"청첩장",date:"2026-03-21",time:"14:00",location:"서울 웨딩홀 3층",contact:"010-0000-0000",greeting:"소중한 분들을 초대합니다. 함께 축하해 주시면 감사하겠습니다.",venueInfo:"서울 웨딩홀 3층 라벤더홀",transitInfo:"지하철 2호선 강남역 5번 출구 도보 8분",accountInfo:"신랑 김OO 123-456-789 (OO은행)",description:"소중한 분들을 초대합니다. 편안한 마음으로 오셔서 함께 축하해 주세요.",coverUrl:"",photos:[],guestbook:[{id:"guestbook-1",name:"지인",message:"결혼 진심으로 축하해요!",createdAt:r()}],isPublic:!0,shareId:"share-event-1",createdAt:r(),updatedAt:r()}],settings:n,updatedAt:r()},l=()=>!1,o=e=>e?e.replaceAll("-","."):"",d=e=>"undefined"!=typeof crypto&&"randomUUID"in crypto?`${e}-${crypto.randomUUID()}`:`${e}-${Date.now()}-${Math.random().toString(16).slice(2)}`,c=()=>{if(!l())return i;let e=window.localStorage.getItem(a);if(!e)return i;try{let t=JSON.parse(e);return{...i,...t,journals:t.journals??i.journals,albums:t.albums??i.albums,events:t.events??i.events,settings:t.settings??i.settings}}catch{return i}},u=e=>{l()&&window.localStorage.setItem(a,JSON.stringify(e))},m=()=>l()?window.localStorage.getItem(a)?c():(u(i),i):i,h=(e,t)=>"string"==typeof e?e:t,p=(e,t="")=>h(e,t)??t,x=e=>Array.isArray(e)?e.filter(e=>"string"==typeof e):[],g=(e,t=!1)=>"boolean"==typeof e?e:t,v=e=>({id:p(e.id,d("journal")),title:p(e.title,""),date:p(e.date,""),category:e.category??"기타",tags:x(e.tags),location:h(e.location,void 0),summary:h(e.summary,void 0),content:p(e.content,""),photos:x(e.photos),isPublic:g(e.isPublic),shareId:h(e.shareId,void 0),createdAt:p(e.createdAt,r()),updatedAt:p(e.updatedAt,r())}),j=e=>({id:p(e.id,d("album")),title:p(e.title,""),periodStart:h(e.periodStart,void 0),periodEnd:h(e.periodEnd,void 0),tags:x(e.tags),coverUrl:h(e.coverUrl,void 0),photos:x(e.photos),memo:h(e.memo,void 0),isPublic:g(e.isPublic),shareId:h(e.shareId,void 0),createdAt:p(e.createdAt,r()),updatedAt:p(e.updatedAt,r())}),f=e=>({id:p(e.id,d("event")),title:p(e.title,""),type:e.type??"기타",date:p(e.date,""),time:h(e.time,void 0),location:h(e.location,void 0),contact:h(e.contact,void 0),greeting:h(e.greeting,void 0),venueInfo:h(e.venueInfo,void 0),transitInfo:h(e.transitInfo,void 0),accountInfo:h(e.accountInfo,void 0),description:p(e.description,""),coverUrl:h(e.coverUrl,void 0),photos:x(e.photos),guestbook:Array.isArray(e.guestbook)?e.guestbook.filter(e=>e&&"object"==typeof e).map(e=>({id:h(e.id)??d("guestbook"),name:h(e.name)??"익명",message:h(e.message)??"",createdAt:p(e.createdAt,r())})):[],isPublic:g(e.isPublic),shareId:h(e.shareId,void 0),createdAt:p(e.createdAt,r()),updatedAt:p(e.updatedAt,r())}),b=e=>({defaultVisibility:e?.defaultVisibility==="link"?"link":n.defaultVisibility,theme:e?.theme==="navy"||e?.theme==="olive"?e.theme:n.theme}),y=e=>JSON.stringify({...e,updatedAt:r()},null,2),N=e=>{let t=JSON.parse(e);return{journals:(t.journals??[]).map(e=>v(e)),albums:(t.albums??[]).map(e=>j(e)),events:(t.events??[]).map(e=>f(e)),settings:b(t.settings),updatedAt:r()}},w=e=>[...e].sort((e,t)=>(t.date??"").localeCompare(e.date??"")),A=e=>w(e)[0],S=(e,t=3)=>w(e).slice(0,t),P=(e,t=2)=>w(e).slice(0,t),k=(e,t=2)=>[...e].slice(0,t)},9811:(e,t,s)=>{"use strict";s.d(t,{k:()=>n});var a=s(7577),r=s(8597);let n=()=>{let[e,t]=(0,a.useState)(r.FB),[s,n]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{t((0,r.mu)()),(async()=>{try{let e=await fetch("/api/archive",{cache:"no-store"});if(!e.ok)throw Error("failed");let s=await e.json();t(s),(0,r.OH)(s)}catch{}finally{n(!0)}})()},[]),{data:e,update:(0,a.useCallback)(e=>{t(t=>{let s={...e(t),updatedAt:new Date().toISOString()};return(0,r.OH)(s),fetch("/api/archive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).catch(()=>{}),s})},[]),refresh:(0,a.useCallback)(()=>{t((0,r.mu)())},[]),ready:s}}},7042:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(9510);let r=(0,s(8570).createProxy)(String.raw`C:\Users\Lee\Desktop\mySite\src\components\journal\JournalDetailClient.tsx#default`);function n({params:e}){return a.jsx(r,{id:e.id})}},7183:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>r});var a=s(9510);s(5023);let r={title:"나만의 라이프 아카이브",description:"기록과 사진을 모아두는 개인 아카이브 공간"};function n({children:e}){return(0,a.jsxs)("div",{className:"mx-auto flex min-h-screen max-w-6xl flex-col px-6 py-8",children:[(0,a.jsxs)("header",{className:"mb-10 flex flex-wrap items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-sand-600",children:"my life archive"}),a.jsx("h1",{className:"text-2xl font-semibold",children:"나만의 사이트"})]}),(0,a.jsxs)("nav",{className:"flex flex-wrap gap-4 text-sm text-sand-700",children:[a.jsx("a",{className:"hover:text-sand-900",href:"/",children:"집"}),a.jsx("a",{className:"hover:text-sand-900",href:"/journal",children:"일기장"}),a.jsx("a",{className:"hover:text-sand-900",href:"/albums",children:"사진첩"}),a.jsx("a",{className:"hover:text-sand-900",href:"/events",children:"특별한 날들"}),a.jsx("a",{className:"hover:text-sand-900",href:"/search",children:"찾기"}),a.jsx("a",{className:"hover:text-sand-900",href:"/settings",children:"내 공간"})]})]}),a.jsx("main",{className:"flex-1",children:e}),a.jsx("footer",{className:"mt-12 border-t border-sand-100 pt-6 text-xs text-sand-500",children:"나의 기록을 차분하게 모아두는 개인 공간"})]})}},2029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(9510);function r({children:e}){return a.jsx("html",{lang:"ko",children:a.jsx("body",{className:"min-h-screen",children:e})})}s(5023)},5023:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[948,471],()=>s(7535));module.exports=a})();