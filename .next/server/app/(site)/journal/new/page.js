(()=>{var e={};e.id=221,e.ids=[221],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8917:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),s(9449),s(7183),s(5866),s(2029);var a=s(3191),r=s(8716),n=s(7922),l=s.n(n),i=s(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["(site)",{children:["journal",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9449)),"C:\\Users\\Lee\\Desktop\\mySite\\src\\app\\(site)\\journal\\new\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,7183)),"C:\\Users\\Lee\\Desktop\\mySite\\src\\app\\(site)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"C:\\Users\\Lee\\Desktop\\mySite\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Lee\\Desktop\\mySite\\src\\app\\(site)\\journal\\new\\page.tsx"],u="/(site)/journal/new/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(site)/journal/new/page",pathname:"/journal/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8670:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},6203:()=>{},3432:(e,t,s)=>{Promise.resolve().then(s.bind(s,590))},5303:()=>{},5047:(e,t,s)=>{"use strict";var a=s(7389);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},590:(e,t,s)=>{"use strict";s.d(t,{default:()=>c});var a=s(326),r=s(7577),n=s(5047),l=s(7937),i=s(8597),o=s(9811);let d=["데이트","연애","육아","가족","여행","기타"];function c(){let e=(0,n.useRouter)(),{update:t}=(0,o.k)(),s=(0,r.useMemo)(()=>new Date().toISOString().slice(0,10),[]),[c,u]=(0,r.useState)(""),[m,p]=(0,r.useState)(s),[h,x]=(0,r.useState)("데이트"),[g,v]=(0,r.useState)(""),[j,b]=(0,r.useState)(""),[f,y]=(0,r.useState)(""),[N,w]=(0,r.useState)([]),[S,A]=(0,r.useState)(null),[P,k]=(0,r.useState)(null),[I,C]=(0,r.useState)(null),[D,O]=(0,r.useState)(!0),[U,_]=(0,r.useState)(!1),[E,M]=(0,r.useState)(null),R=async e=>{let t=await (0,l.R)(e.target.files,6,{maxWidth:1600,maxHeight:1600,quality:.82,mimeType:"image/webp"});w(e=>[...e,...t]),e.target.value=""},$=e=>{window.confirm("이 사진을 삭제할까요?")&&w(t=>{let s=t[e];return M({index:e,photo:s}),t.filter((t,s)=>s!==e)})},q=(e,t)=>{w(s=>{let a="up"===t?e-1:e+1;return a<0||a>=s.length?s:(0,l.u)(s,e,a)})},L=e=>{w(t=>(0,l.u)(t,e,0)),C("대표 사진을 변경했어요."),window.setTimeout(()=>C(null),1500)},J=e=>{A(e)},T=e=>{w(t=>null===S||S===e?t:(0,l.u)(t,S,e)),A(null),k(null)},G=e=>{k(e)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("header",{children:[a.jsx("h2",{className:"text-2xl font-semibold",children:"새 기록 쓰기"}),a.jsx("p",{className:"mt-2 text-sm text-sand-600",children:"오늘의 순간을 간단하게 남겨보세요."})]}),(0,a.jsxs)("section",{className:"card space-y-6 p-6 text-sm text-sand-700",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"label",children:"제목"}),a.jsx("input",{className:"input mt-2",placeholder:"오늘의 제목을 적어주세요",value:c,onChange:e=>u(e.target.value)})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"label",children:"날짜"}),a.jsx("input",{className:"input mt-2",type:"date",value:m,onChange:e=>p(e.target.value)})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"label",children:"카테고리"}),a.jsx("select",{className:"input mt-2",value:h,onChange:e=>x(e.target.value),children:d.map(e=>a.jsx("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"label",children:"장소"}),a.jsx("input",{className:"input mt-2",placeholder:"예: 홍대, 집, 공원",value:g,onChange:e=>v(e.target.value)})]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"label",children:"태그"}),a.jsx("input",{className:"input mt-2",placeholder:"쉼표로 구분해 입력",value:j,onChange:e=>b(e.target.value)})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"label",children:"사진 추가"}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-3 rounded-2xl border border-dashed border-sand-200 bg-sand-50 px-4 py-6",children:[a.jsx("span",{className:"text-sm text-sand-500",children:"최대 6장까지 추가할 수 있어요."}),(0,a.jsxs)("label",{className:"button-outline ml-auto cursor-pointer",children:["파일 선택",a.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:R})]})]}),N.length>0?a.jsx("div",{className:"mt-4 grid gap-3 sm:grid-cols-3",children:N.map((e,t)=>(0,a.jsxs)("div",{className:`photo-tile ${S===t?"dragging":""} ${P===t?"drop-target":""}`,onDragOver:e=>{e.preventDefault(),G(t)},onDrop:()=>T(t),children:[a.jsx("img",{src:e,alt:"업로드한 사진",className:`h-24 w-full rounded-xl object-cover ${0===t?"ring-2 ring-sand-400":""}`,draggable:!0,onDragStart:()=>J(t)}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-sand-500",children:[a.jsx("span",{children:0===t?"대표":`#${t+1}`}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",className:"hover:text-sand-900",onClick:()=>L(t),children:"대표 지정"}),a.jsx("button",{type:"button",className:"hover:text-sand-900",onClick:()=>q(t,"up"),children:"위로"}),a.jsx("button",{type:"button",className:"hover:text-sand-900",onClick:()=>q(t,"down"),children:"아래로"}),a.jsx("button",{type:"button",className:"text-rose-400 hover:text-rose-600",onClick:()=>$(t),children:"삭제"})]})]})]},e))}):null,E?(0,a.jsxs)("div",{className:"mt-3 flex items-center gap-3 text-xs text-sand-500",children:[a.jsx("span",{children:"사진을 삭제했어요."}),a.jsx("button",{className:"button-outline px-2 py-1 text-xs",type:"button",onClick:()=>{E&&(w(e=>(0,l.u)([...e,E.photo],e.length,E.index)),M(null),C("삭제를 되돌렸어요."),window.setTimeout(()=>C(null),1500))},children:"되돌리기"})]}):null]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"label",children:"본문"}),a.jsx("textarea",{className:"textarea mt-2 min-h-[180px]",placeholder:"오늘의 느낌과 순간을 자유롭게 적어보세요.",value:f,onChange:e=>y(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[a.jsx("input",{type:"checkbox",className:"accent-sand-700",checked:D,onChange:e=>O(e.target.checked)}),"비공개로 저장하기"]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[a.jsx("input",{type:"checkbox",className:"accent-sand-700",checked:U,onChange:e=>_(e.target.checked)}),"공유 링크 만들기"]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[a.jsx("button",{className:"button-outline",type:"button",children:"임시저장"}),a.jsx("button",{className:"button",type:"button",onClick:()=>{if(!c.trim())return;let s=(0,i.Mc)("journal"),a=f.trim().length>0?f.trim().slice(0,60)+"...":"",r=U?(0,i.Mc)("share"):void 0;t(e=>({...e,journals:[{id:s,title:c.trim(),date:m,category:h,tags:j.split(",").map(e=>e.trim()).filter(Boolean),location:g.trim()||void 0,summary:a,content:f.trim(),photos:N,isPublic:!D,shareId:r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},...e.journals]})),e.push(`/journal/${s}`)},children:"저장하기"})]})]}),I?a.jsx("div",{className:"fixed bottom-6 left-1/2 z-50 -translate-x-1/2 rounded-full bg-sand-900 px-4 py-2 text-xs text-white",children:I}):null]})}},7937:(e,t,s)=>{"use strict";s.d(t,{R:()=>l,u:()=>i});let a=e=>new Promise((t,s)=>{let a=new FileReader;a.onload=()=>t(String(a.result)),a.onerror=()=>s(Error("파일을 읽지 못했어요.")),a.readAsDataURL(e)}),r=e=>new Promise((t,s)=>{let a=new Image;a.onload=()=>t(a),a.onerror=()=>s(Error("이미지를 불러오지 못했어요.")),a.src=e}),n=async(e,t={})=>{let{maxWidth:s=1600,maxHeight:n=1600,quality:l=.82,mimeType:i="image/webp"}=t,o=await a(e),d=await r(o),c=Math.min(s/d.width,n/d.height,1),u=Math.round(d.width*c),m=Math.round(d.height*c),p=document.createElement("canvas");p.width=u,p.height=m;let h=p.getContext("2d");return h?(h.drawImage(d,0,0,u,m),p.toDataURL(i,l)):o},l=async(e,t=12,s={})=>{if(!e)return[];let a=Array.from(e).slice(0,t);return await Promise.all(a.map(e=>n(e,s)))},i=(e,t,s)=>{if(t===s)return e;let a=[...e],[r]=a.splice(t,1);return void 0===r?e:(a.splice(s,0,r),a)}},8597:(e,t,s)=>{"use strict";s.d(t,{BX:()=>P,FB:()=>m,Gf:()=>A,H4:()=>k,Mc:()=>d,OH:()=>u,dk:()=>N,jo:()=>S,mu:()=>c,p6:()=>o,u1:()=>y});let a="lifeArchiveData",r=()=>new Date().toISOString(),n={defaultVisibility:"private",theme:"cream"},l={journals:[{id:"journal-1",title:"따뜻했던 오후",date:"2026-01-15",category:"데이트",tags:["산책","카페"],location:"서교동",summary:"작은 산책과 커피 한 잔을 기록했어요.",content:"오후의 공기는 맑고 따뜻했어요. 천천히 걸으며 이야기를 나누고, 작은 카페에 들어가 창가에 앉았어요.",photos:[],isPublic:!1,shareId:"share-journal-1",createdAt:r(),updatedAt:r()}],albums:[{id:"album-1",title:"봄 여행",periodStart:"2025-04-02",periodEnd:"2025-04-05",tags:["여행","봄"],coverUrl:"",photos:[],memo:"가족과 함께한 봄 여행 사진을 모아두었어요.",isPublic:!1,shareId:"share-album-1",createdAt:r(),updatedAt:r()}],events:[{id:"event-1",title:"청첩장",type:"청첩장",date:"2026-03-21",time:"14:00",location:"서울 웨딩홀 3층",contact:"010-0000-0000",greeting:"소중한 분들을 초대합니다. 함께 축하해 주시면 감사하겠습니다.",venueInfo:"서울 웨딩홀 3층 라벤더홀",transitInfo:"지하철 2호선 강남역 5번 출구 도보 8분",accountInfo:"신랑 김OO 123-456-789 (OO은행)",description:"소중한 분들을 초대합니다. 편안한 마음으로 오셔서 함께 축하해 주세요.",coverUrl:"",photos:[],guestbook:[{id:"guestbook-1",name:"지인",message:"결혼 진심으로 축하해요!",createdAt:r()}],isPublic:!0,shareId:"share-event-1",createdAt:r(),updatedAt:r()}],settings:n,updatedAt:r()},i=()=>!1,o=e=>e?e.replaceAll("-","."):"",d=e=>"undefined"!=typeof crypto&&"randomUUID"in crypto?`${e}-${crypto.randomUUID()}`:`${e}-${Date.now()}-${Math.random().toString(16).slice(2)}`,c=()=>{if(!i())return l;let e=window.localStorage.getItem(a);if(!e)return l;try{let t=JSON.parse(e);return{...l,...t,journals:t.journals??l.journals,albums:t.albums??l.albums,events:t.events??l.events,settings:t.settings??l.settings}}catch{return l}},u=e=>{i()&&window.localStorage.setItem(a,JSON.stringify(e))},m=()=>i()?window.localStorage.getItem(a)?c():(u(l),l):l,p=(e,t)=>"string"==typeof e?e:t,h=(e,t="")=>p(e,t)??t,x=e=>Array.isArray(e)?e.filter(e=>"string"==typeof e):[],g=(e,t=!1)=>"boolean"==typeof e?e:t,v=e=>({id:h(e.id,d("journal")),title:h(e.title,""),date:h(e.date,""),category:e.category??"기타",tags:x(e.tags),location:p(e.location,void 0),summary:p(e.summary,void 0),content:h(e.content,""),photos:x(e.photos),isPublic:g(e.isPublic),shareId:p(e.shareId,void 0),createdAt:h(e.createdAt,r()),updatedAt:h(e.updatedAt,r())}),j=e=>({id:h(e.id,d("album")),title:h(e.title,""),periodStart:p(e.periodStart,void 0),periodEnd:p(e.periodEnd,void 0),tags:x(e.tags),coverUrl:p(e.coverUrl,void 0),photos:x(e.photos),memo:p(e.memo,void 0),isPublic:g(e.isPublic),shareId:p(e.shareId,void 0),createdAt:h(e.createdAt,r()),updatedAt:h(e.updatedAt,r())}),b=e=>({id:h(e.id,d("event")),title:h(e.title,""),type:e.type??"기타",date:h(e.date,""),time:p(e.time,void 0),location:p(e.location,void 0),contact:p(e.contact,void 0),greeting:p(e.greeting,void 0),venueInfo:p(e.venueInfo,void 0),transitInfo:p(e.transitInfo,void 0),accountInfo:p(e.accountInfo,void 0),description:h(e.description,""),coverUrl:p(e.coverUrl,void 0),photos:x(e.photos),guestbook:Array.isArray(e.guestbook)?e.guestbook.filter(e=>e&&"object"==typeof e).map(e=>({id:p(e.id)??d("guestbook"),name:p(e.name)??"익명",message:p(e.message)??"",createdAt:h(e.createdAt,r())})):[],isPublic:g(e.isPublic),shareId:p(e.shareId,void 0),createdAt:h(e.createdAt,r()),updatedAt:h(e.updatedAt,r())}),f=e=>({defaultVisibility:e?.defaultVisibility==="link"?"link":n.defaultVisibility,theme:e?.theme==="navy"||e?.theme==="olive"?e.theme:n.theme}),y=e=>JSON.stringify({...e,updatedAt:r()},null,2),N=e=>{let t=JSON.parse(e);return{journals:(t.journals??[]).map(e=>v(e)),albums:(t.albums??[]).map(e=>j(e)),events:(t.events??[]).map(e=>b(e)),settings:f(t.settings),updatedAt:r()}},w=e=>[...e].sort((e,t)=>(t.date??"").localeCompare(e.date??"")),S=e=>w(e)[0],A=(e,t=3)=>w(e).slice(0,t),P=(e,t=2)=>w(e).slice(0,t),k=(e,t=2)=>[...e].slice(0,t)},9811:(e,t,s)=>{"use strict";s.d(t,{k:()=>n});var a=s(7577),r=s(8597);let n=()=>{let[e,t]=(0,a.useState)(r.FB),[s,n]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{t((0,r.mu)()),(async()=>{try{let e=await fetch("/api/archive",{cache:"no-store"});if(!e.ok)throw Error("failed");let s=await e.json();t(s),(0,r.OH)(s)}catch{}finally{n(!0)}})()},[]),{data:e,update:(0,a.useCallback)(e=>{t(t=>{let s={...e(t),updatedAt:new Date().toISOString()};return(0,r.OH)(s),fetch("/api/archive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).catch(()=>{}),s})},[]),refresh:(0,a.useCallback)(()=>{t((0,r.mu)())},[]),ready:s}}},9449:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(9510);let r=(0,s(8570).createProxy)(String.raw`C:\Users\Lee\Desktop\mySite\src\components\journal\JournalFormClient.tsx#default`);function n(){return a.jsx(r,{})}},7183:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>r});var a=s(9510);s(5023);let r={title:"나만의 라이프 아카이브",description:"기록과 사진을 모아두는 개인 아카이브 공간"};function n({children:e}){return(0,a.jsxs)("div",{className:"mx-auto flex min-h-screen max-w-6xl flex-col px-6 py-8",children:[(0,a.jsxs)("header",{className:"mb-10 flex flex-wrap items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-sand-600",children:"my life archive"}),a.jsx("h1",{className:"text-2xl font-semibold",children:"나만의 사이트"})]}),(0,a.jsxs)("nav",{className:"flex flex-wrap gap-4 text-sm text-sand-700",children:[a.jsx("a",{className:"hover:text-sand-900",href:"/",children:"집"}),a.jsx("a",{className:"hover:text-sand-900",href:"/journal",children:"일기장"}),a.jsx("a",{className:"hover:text-sand-900",href:"/albums",children:"사진첩"}),a.jsx("a",{className:"hover:text-sand-900",href:"/events",children:"특별한 날들"}),a.jsx("a",{className:"hover:text-sand-900",href:"/search",children:"찾기"}),a.jsx("a",{className:"hover:text-sand-900",href:"/settings",children:"내 공간"})]})]}),a.jsx("main",{className:"flex-1",children:e}),a.jsx("footer",{className:"mt-12 border-t border-sand-100 pt-6 text-xs text-sand-500",children:"나의 기록을 차분하게 모아두는 개인 공간"})]})}},2029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(9510);function r({children:e}){return a.jsx("html",{lang:"ko",children:a.jsx("body",{className:"min-h-screen",children:e})})}s(5023)},5023:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[948,471],()=>s(8917));module.exports=a})();